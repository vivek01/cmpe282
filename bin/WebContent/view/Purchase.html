
<!DOCTYPE html>
<!--[if IE 8]>    <html class="no-js lt-ie9" lang="en"> <![endif]-->
<!--[if gt IE 8]><!-->
<html class="no-js" lang="en">
<!--<![endif]-->
<head>
<meta charset="utf-8" />

<!-- Set the viewport width to device width for mobile -->
<meta name="viewport" content="width=device-width" />
<link href="../js/creditcardjs-v0.10.12.min.css" rel="stylesheet">
<title style=color:#3B5998>Cloud EStore</title>
<script src="../js/creditcardjs-v0.10.12.min.js"></script>
<link rel="stylesheet" href="../css/normalize.css">
<link rel="stylesheet" href="../css/foundation.css">
<script src="../js/jquery.creditCardValidator.coffee"></script>
<script src="../js/jquery.creditCardValidator.js"></script>
<script type="text/javascript" src="http://code.jquery.com/jquery.js"></script>
<script src="../js/vendor/custom.modernizr.js"></script>
<script type="text/javascript" src="http://code.jquery.com/jquery.js"></script>
<script>
	var au;
	function processUser() {

		var parameters = location.search.substring(1).split("&");

		var temp = parameters[0].split("=");
		au = unescape(temp[1]);
		alert(au);

	}

	function call() {

		var addURL = "http://ec2-54-172-52-250.compute-1.amazonaws.com:8080/CloudServices/rest/catalog/checkout";
		alert(idToJSON())
		$.ajax({
			type : "POST",
			url : addURL,
			contentType : "application/json",
			dataType : 'json',
			data : idToJSON(),

			success : function(data, textStatus, jqXHR) {

				alert("Successfully purchased the itme");
			},
			error : function(textStatus, jqXHR, errorThrown) {
				alert("error ")
				
			}

		});

	}
	function idToJSON() {
		return JSON.stringify({
			"sessionId" : au
		});
	}
	function validate() {
		alert("bye")
		var flag = false;
		var len = document.forms["master"]["cl"].value.length;
		alert(len);
		if (len == 16) {
			alert("Length of password is 16")
		}
		//alert(flag)
		return flag;
	}
	function box() {
		alert("hi1")
	}

	function tired() {
		alert("inside tired")
		var op = $('#cl').val().length

		alert("Credit card lenght is " + op)

		if (op == 16) {
			alert("Trying to make AJAX call")
			var purchaseURL = "http://ec2-54-172-52-250.compute-1.amazonaws.com:8080/CloudServices/rest/catalog/checkout";
			alert(idToJSON())
			$.ajax({
				type : "POST",
				url : purchaseURL,
				contentType : "application/json",
				dataType : 'json',
				data : idToJSON(),

				success : function(data, textStatus, jqXHR) {

					alert("Successfully purchased the itme");
					window.location.replace("http://ec2-54-172-52-250.compute-1.amazonaws.com:8080/CloudServices/view/Success.html?authid="+au);
				},
				error : function(textStatus, jqXHR, errorThrown) {
					alert("error ")
					
				}

			});
		}
		else
			{
			alert("Please resubmit form with correction")
			}
	}
</script>

</head>
<body onload="processUser()" class="off-canvas hide-extras">
	<form id="master" onsubmit="return false;">
		<div class="row">
			<div class="large-12 columns">

				<!-- Navigation -->
				<div class="fixed">
					<nav class="top-bar">
						<ul class="title-area">
							<!-- Title Area -->
							<li class="name">
								<h1>
									<a href="home.html"> <img src="../img/macpro.jpg"
										style="max-height: 30px; max-width: 30px">
									</a>
								</h1>
							</li>
							<li class="toggle-topbar menu-icon"><a href=#><span>Menu</span></a></li>
						</ul>

						<section class="top-bar-section">



							<ul class="right">



								<li class="divider"></li>
								<li class="has-button"><a class="button round"
									href="logout.html">Norton</a></li>
							</ul>
						</section>
					</nav>
				</div>
				<!-- End Navigation -->

			</div>
		</div>
		<!-- End of first row -->
		<!--start of first row-->

		<div class="row">


			<link href="../js/creditcardjs-v0.10.12.min.css" rel="stylesheet">

			<div class="ccjs-card" id="credit">
				<label class="ccjs-number"> Card Number <input type="text"
					id="cl" name="card-number" class="ccjs-number"
					placeholder="•••• •••• •••• ••••" required>
				</label> <label class="ccjs-csc"> Security Code <input name="csc"
					class="ccjs-csc" placeholder="•••">
				</label>

				<button type="button" class="ccjs-csc-help">?</button>

				<label class="ccjs-name"> Name on Card <input name="name"
					class="ccjs-name" required>
				</label>
				<fieldset class="ccjs-expiration">
					<legend>Expiration</legend>
					<select name="month" class="ccjs-month" required>
						<option selected disabled>MM</option>
						<option value="01">01</option>
						<option value="02">02</option>
						<option value="03">03</option>
						<option value="04">04</option>
						<option value="05">05</option>
						<option value="06">06</option>
						<option value="07">07</option>
						<option value="08">08</option>
						<option value="09">09</option>
						<option value="10">10</option>
						<option value="11">11</option>
						<option value="12">12</option>
					</select> <select name="year" class="ccjs-year" required>
						<option selected disabled>YY</option>
						<option value="14">14</option>
						<option value="15">15</option>
						<option value="16">16</option>
						<option value="17">17</option>
						<option value="18">18</option>
						<option value="19">19</option>
						<option value="20">20</option>
						<option value="21">21</option>
						<option value="22">22</option>
						<option value="23">23</option>
						<option value="24">24</option>
					</select>
				</fieldset>

				<select name="card-type" class="ccjs-hidden-card-type" required>
					<option value="amex" class="ccjs-amex">American Express</option>
					<option value="discover" class="ccjs-discover">Discover</option>
					<option value="mastercard" class="ccjs-mastercard">MasterCard</option>
					<option value="visa" class="ccjs-visa">Visa</option>
					<option value="diners-club" class="ccjs-diners-club">Diners
						Club</option>
					<option value="jcb" class="ccjs-jcb">JCB</option>
					<!--<option value="laser" class="laser">Laser</option>-->
					<!--<option value="maestro" class="maestro">Maestro</option>-->
					<!--<option value="unionpay" class="unionpay">UnionPay</option>-->
					<!--<option value="visa-electron" class="visa-electron">Visa Electron</option>-->
					<!--<option value="dankort" class="dankort">Dankort</option>-->
				</select>
				<p id="demo"></p>
			</div>

			<script src="../js/creditcardjs-v0.10.12.min.js"></script>

		</div>





		<!-- Footer -->

		<footer class="row">
			<div class="large-12 columns">
				<hr>
				<div class="row">
					<div class="large-6 columns"></div>
					<div class="large-6 columns">
						<input type="submit" value="Pay" onclick="tired()"></input>
					</div>
				</div>
			</div>
		</footer>

		<script>
			document.write('<script src=../js/vendor/'
					+ ('__proto__' in {} ? 'zepto' : 'jquery')
					+ '.js><\/script>')
		</script>
		<script src="../js/foundation.min.js"></script>
		<script>
			$(document).foundation();
		</script>
		<script type="text/javascript">
			$(window).load(function() {
				$('#featured').orbit({
					fluid : '2x1'
				});
			});
		</script>
		<!-- End Footer -->
	</form>
</body>
</html>